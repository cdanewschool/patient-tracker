<div ng-include="'popups/header.html'" ng-init="title='Add {{model.selectedCondition?model.selectedCondition.name:''}} Tracker'"></div>

<div class="modal-body">
   	
	<p>What would you like to track?</p>
   	
   	<accordion close-others="true">
   		
		<accordion-group heading="A Medication">
		
			<div ng-controller="MedicationsCtrl">
			
	      		<div class="alert alert-warning alert-dismissable" ng-if="status!=null">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="setStatus()">&times;</button>
					<small>{{status}}</small>
				</div>
		        
		        <form role="form">
		        
		        	<div class="form-group">
			            <input type="text" class="form-control" placeholder="Medication" medications-typeahead="medicationsModel.form.statement.medication">
			        </div>
			        
			        <!-- dosage.timing -->
			        <div class="form-group">
			        
			        	<div class="row">
			        	
				            <!-- dosage.event.start -->
				            <div class="col-xs-12 col-sm-6">
				                <label>Started:</label>
				                <input type="date" class="form-control input-sm" ng-model="medicationsModel.form.statement.startTime">
				            </div>
				            
				            <!-- dosage.event.end -->
				            <div class="col-xs-12 col-sm-6">
				                <label for="addMedicationEndDate">Ended:</label>
				                <input type="date" class="form-control input-sm" ng-model="medicationsModel.form.statement.endTime">
				            </div>
			            
			            </div>
			            
			        </div>
			        
			        <div class="form-group">
			        
			        	<h4>Frequency</h4>
			            
			            <div class="row">
			            	<div class="col-xs-6" ng-repeat="f in medicationsModel.formOptions.regularities">
			            		<div class="radio">
			            			<label><input type="radio" name="regularity" class="input-sm" ng-model="medicationsModel.form.statement.regularity" value="{{f.value}}">{{f.label}}</label>
			            		</div>
			            	</div>
			            </div>
			            
			        </div>
			        
			        <!-- dosage.quantity -->
			        <div class="form-group" ng-show="medicationsModel.form.statement.regularity==medicationsModel.formOptions.regularities[1].value">
			            
			            <h4>Dosage</h4>
			            
			            <div class="row">
			            
				            <!-- dosage.quantity.value -->
				            <div class="col-xs-6">
				                <input type="number" class="form-control input-sm" ng-model="medicationsModel.form.statement.dosageQuantity" value="1" min="0" max="5000">
				            </div>
				            
				            <!-- dosage.timing.repeat.units -->
				            <div class="col-xs-6">
				                <select class="form-control input-sm" ng-model="medicationsModel.form.statement.dosageUnit" ng-options="t.label for t in medicationsModel.formOptions.dosageUnits"></select>
				            </div>
				            
				            <!-- dosage.quantity.value -->
				            <div class="col-xs-12">
				            	<select class="form-control input-sm" ng-model="medicationsModel.form.statement.dosageRoute" ng-options="t.label for t in medicationsModel.formOptions.dosageRoutes"></select>
				            </div>
				            
			            </div>
			            
			        </div>
			        
			        <div class="form-group" ng-show="medicationsModel.form.statement.regularity==medicationsModel.formOptions.regularities[1].value">
			            
			            <div class="row">
		            		
			            	<div class="col-xs-6">
				                <span>every</span>
				            </div>
			            	
			            	<!-- dosage.timing.repeat.duration -->
				            <div class="col-xs-6">
				                <input type="number" class="form-control input-sm" ng-model="medicationsModel.form.statement.dosageFrequency" min="0" max="24">
				            </div>
				            
			            	<!-- dosage.timing.repeat.units -->
			           		<div class="col-xs-12">
			                	<select class="form-control input-sm"  ng-model="medicationsModel.form.statement.dosageRepeatUnit" ng-options="t.value as t.label for t in medicationsModel.formOptions.repeatUnits"></select>
			            	</div>
			            
			            </div>
		        	
		        	</div>
		        	
			        <div class="form-group" ng-show="form.frequency==medicationsModel.formOptions.frequencies[0]">
			        	<label>Would you like to turn on a reminder for each intake?</label>
			            <select class="form-control input-sm" ng-model="medicationsModel.form.statement.reminder" ng-options="t.value as t.label for t in medicationsModel.formOptions.reminder"></select>
			        </div>
			        
			        <div class="form-group">
			        	<label>Reason for Taking:</label>
						<textarea class="form-control"></textarea>
			        </div>
			        
			        <button type="submit" class="btn btn-primary" ng-click="addStatement()">Track It!</button>
			
				</form>
				
			</div>
			
    	</accordion-group>
    
    	<accordion-group heading="A Vital Sign">
			
			<div ng-controller="VitalsCtrl">
			
				<div class="alert alert-warning alert-dismissable" ng-if="status!=null">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="setStatus()">&times;</button>
					<small>{{status}}</small>
				</div>
		        
		        <form role="form">
		        	
		        	<div class="form-group">
		        		<select class="form-control input-sm" ng-model="vitalsModel.selectedVitalId" ng-options="t.id as t.label for t in [{id:undefined,label:'Select'}].concat(vitalsModel.definitions)"></select>
		        	</div>
		        	
			        <button type="submit" class="btn btn-primary" ng-click="addStatement()">Track It!</button>
			
				</form>
			
			</div>
			
		</accordion-group>
		
		<accordion-group heading="A Custom Tracker">
			
			<div ng-controller="TrackersCtrl">
			
				<div class="alert alert-warning alert-dismissable" ng-if="status!=null">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="setStatus()">&times;</button>
					<small>{{status}}</small>
				</div>
		        
		        <form role="form">
		        	
		        	<div class="form-group">
		        		<select class="form-control input-sm" ng-model="trackersModel.selectedTrackerId" ng-options="t.id as t.label for t in [{id:undefined,label:'Select'}].concat(trackersModel.definitions)"></select>
		        	</div>
		        	
		        	<div class="form-group" ng-show="trackersModel.selectedTracker.components">
		        		<select class="form-control input-sm" ng-model="trackersModel.selectedTrackerOptionId" ng-options="t.code as t.label for t in [{code:undefined,label:'Select'}].concat(trackersModel.selectedTracker.components)"></select>
		        	</div>
		        	
			        <button type="submit" class="btn btn-primary" ng-click="addStatement()">Track It!</button>
			
				</form>
			
			</div>
			
		</accordion-group>
		
   	</accordion>
       
</div>